---
publish_date: 20220530    
layout: ../../layouts/FleetingNoteLayout.astro
---
- how to keep mailgun webhooks secure - https://www.mailgun.com/blog/product/a-guide-to-using-mailguns-webhooks/

tldr, heres the code 

```js
let crypto;
try {
  crypto = require('node:crypto');
} catch (err) {
  console.log('crypto support is disabled!');
}

const apikey = "this-would-be-a-hash-provided-by-mailgun"

#this would be available in the event.body of the webhook response
const signature = {
    token: '8028007cda4ef786141ed663c33a2ab343dc7f0e8bde3c1436',
    timestamp: '1653941793',
    signature: '3e198e6c48fcc9b9ef6e4def815d5df0e1d256b9cb491fe04a33995c093ec0b2'
  };

const key = signature.timestamp + signature.token  
const hash = crypto.createHmac('sha256', apikey)  
                   .update(key)
                   .digest('hex');

console.log(hash) #this should match signature.signature
```